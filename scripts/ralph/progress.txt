# Ralph Progress Log
Started: Fri Feb 13 11:58:05 CET 2026

## Codebase Patterns
- DB migrations: numbered `0001_xxx.sql` files in `src-tauri/src/db/migrations/`, registered via `include_str!` in MIGRATIONS array in `db/mod.rs`
- DB query modules: `src-tauri/src/db/<feature>.rs`, registered as `pub mod` in `db/mod.rs`
- Models: `src-tauri/src/models/<feature>.rs` with `#[derive(Debug, Clone, Serialize, Deserialize, FromRow)]` and `#[serde(rename_all = "camelCase")]`
- Commands: `src-tauri/src/commands/<feature>.rs`, re-exported in `commands/mod.rs`, imported and added to `generate_handler!` in `lib.rs`
- Commands use `State<'_, DbPool>` for DB access, return `Result<T, AppError>`
- Single-row settings pattern: use `id INTEGER PRIMARY KEY DEFAULT 1` with `INSERT OR IGNORE` for seed

---

## 2026-02-13 - US-001
- What was implemented: notification_settings DB table, migration, model, db query functions, and Tauri commands (get/update)
- Files changed:
  - `src-tauri/src/db/migrations/0011_create_notification_settings.sql` (new)
  - `src-tauri/src/db/mod.rs` (added migration + module)
  - `src-tauri/src/db/notification_settings.rs` (new)
  - `src-tauri/src/models/notification_settings.rs` (new)
  - `src-tauri/src/models/mod.rs` (added module + re-export)
  - `src-tauri/src/commands/notification_settings.rs` (new)
  - `src-tauri/src/commands/mod.rs` (added module + re-exports)
  - `src-tauri/src/lib.rs` (added imports + generate_handler entries)
- **Learnings for future iterations:**
  - 3 registration points for new commands: command file, commands/mod.rs re-export, lib.rs import + generate_handler
  - DB modules go in both db/mod.rs (pub mod) and the model goes in models/mod.rs
  - `sqlx::Error` auto-converts to `AppError` via the `From` impl so `?` works seamlessly
---
